<!DOCTYPE html>
<html>
    <head>
        <title>Hamish Huggard</title>
        <link rel="stylesheet" href="style.css">
        <script src="/main.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <meta charset="UTF-8">
        <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico"/>
        <style>
        svg path {
            fill: none;
            stroke: #000;
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-width: 15;
            /* transition: 0.2s; */
        }
        </style>
        <script>

            function makeNoise() {
                return Math.round( (Math.random() - 0.5) * 10 );
            }

            function addNoiseToD(dArray) {
                const noisyD = [];
                for (let di of dArray) {
                    if (typeof(di)==='number') {
                        noisyD.push( di + makeNoise() );
                    } else {
                        noisyD.push( di );
                    }
                }
                return noisyD;
            }

            function makeCircle(
                canvasName,
                x0, y0, x1, y1
            ) {
                var intervalID = window.setInterval(myCallback, 150);
                function myCallback() {
                    let canvas = document.getElementById(canvasName);
                    const c = 0.552;
                    const smallCircle = [
                        'M', 0, -1,
                        'C', -c, -1, -1, -c, -1, 0,
                        'S', -c, 1, 0, 1,
                        'S', 1, c, 1, 0,
                        'S', c, -1, 0, -1,
                        'S', -1, -c, -1, 0,
                    ];
                    let isX = true;
                    const dArray = smallCircle.map((x) => {
                        if (typeof(x)!=='number') {
                            isX = true;
                            return x
                        } else if (isX) { 
                            isX = false;
                            return (x + 1) / 2 * (x1-x0) + x0;
                        } else {
                            isX = true;
                            return (x + 1) / 2 * (y1-y0) + y0;
                        }
                    })
                    const noisyDArray = addNoiseToD( dArray )
                    canvas.setAttribute("d", noisyDArray.join(' '));
                }
            }

            function makeLine(
                canvasName,
                x0, y0, x1, y1
            ) {
                var intervalID = window.setInterval(myCallback2, 150);
                function myCallback2() {
                    let canvas = document.getElementById("wobble-line");
                    const getNoise = () => Math.round( (Math.random() - 0.5) * 10 );
                    const coords = [
                        [10, 10], 
                        [10, 110], 
                        [10, 210], 
                    ];
                    const noisyCoords = [];
                    let noisyCoord;
                    for (let coord of coords) {
                        noisyCoord = [];
                        for (let ord of coord) {
                            noisyCoord.push( ord + getNoise() );
                        }
                        noisyCoords.push( noisyCoord );
                    }
                    let d = [ 
                        'M', 
                        ...noisyCoords[0],
                        'Q',
                        ...noisyCoords[1],
                        ...noisyCoords[2]
                    ].join(' ');
                    canvas.setAttribute("d", d);
                }
            }

            makeCircle(
                "head",
                20, 20, 220, 220
            );
            makeCircle(
                "left-eye",
                30, 120, 50, 140
            );
            makeCircle(
                "right-eye",
                130, 120, 150, 140
            );

        </script>
    </head>
    <body>
        <div class="center" style="height: 100vh;">
            <div>
                <div class="center">

                    <svg viewBox="0 0 300 300">
                        <path id="head" />
                        <path id="left-eye" />
                        <path id="right-eye" />
                    </svg>

                    <div id="div" class="normal" onclick="reverseImage(this)">
                        <img alt="Click me!" class="home-animation" src="/images/wiggly_dancing_guy.gif"/>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
