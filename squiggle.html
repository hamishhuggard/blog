<!DOCTYPE html>
<html>
    <head>
        <title>Hamish Huggard</title>
        <link rel="stylesheet" href="style.css">
        <script src="/main.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <meta charset="UTF-8">
        <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico"/>
        <style>
        svg path {
            fill: none;
            stroke: #000;
            stroke-linecap: round;
            stroke-linejoin: round;
            stroke-width: 15;
            /* transition: 0.2s; */
        }
        </style>
        <script>

            function makeNoise() {
                return Math.round( (Math.random() - 0.5) * 10 );
            }

            function addNoiseToD(dArray) {
                const noisyD = [];
                for (let di of dArray) {
                    if (typeof(di)==='number') {
                        noisyD.push( di + makeNoise() );
                    } else {
                        noisyD.push( di );
                    }
                }
                return noisyD;
            }

            function makeDisk(
                canvasName,
                x, y, radius
            ) {
                var intervalID = window.setInterval(myCallback, 150);
                function myCallback() {
                    let canvas = document.getElementById(canvasName);
                    const noisyX = x + makeNoise()
                    const noisyY = y + makeNoise()
                    canvas.setAttribute("cx", noisyX);
                    canvas.setAttribute("cy", noisyY);
                    canvas.setAttribute("r", radius);
                }
            }

            function makePolyLine(
                canvasName,
                coords
            ) {
                var intervalID = window.setInterval(myCallback, 150);
                function myCallback() {
                    let canvas = document.getElementById(canvasName);
                    let dArray = [ 
                        'M', 
                        coords[0],
                        coords[1],
                    ]
                    let x0, x1, x2, y0, y1, y2;
                    for (let i=0; i<coords.length-2; i = i+2) {
                        x0 = coords[i];
                        y0 = coords[i+1];
                        x2 = coords[i+2];
                        y2 = coords[i+3];

                        x1 = Math.round(x0 + (x2 - x0)/2);
                        y1 = Math.round(y0 + (y2 - y0)/2);

                        dArray.push('Q');
                        dArray.push(x1, y1, x2, y2);
                    }
                    const noisyDArray = addNoiseToD( dArray )
                    canvas.setAttribute("d", noisyDArray.join(' '));
                }
            }

            function makeCircle(
                canvasName,
                x0, y0, x1, y1
            ) {
                var intervalID = window.setInterval(myCallback, 150);
                function myCallback() {
                    let canvas = document.getElementById(canvasName);
                    const c = 0.552;
                    const smallCircle = [
                        'M', 0, -1,
                        'C', -c, -1, -1, -c, -1, 0,
                        'S', -c, 1, 0, 1,
                        'S', 1, c, 1, 0,
                        'S', c, -1, 0, -1,
                        'S', -1, -c, -1, 0,
                    ];
                    let isX = true;
                    const dArray = smallCircle.map((x) => {
                        if (typeof(x)!=='number') {
                            isX = true;
                            return x
                        } else if (isX) { 
                            isX = false;
                            return (x + 1) / 2 * (x1-x0) + x0;
                        } else {
                            isX = true;
                            return (x + 1) / 2 * (y1-y0) + y0;
                        }
                    })
                    const noisyDArray = addNoiseToD( dArray )
                    canvas.setAttribute("d", noisyDArray.join(' '));
                }
            }

            makeCircle(
                "head",
                20, 20, 220, 220
            );
            /*
            makeCircle(
                "left-eye",
                30, 120, 50, 140
            );
            makeCircle(
                "right-eye",
                130, 120, 150, 140
            );
            */
            makeDisk(
                "left-eye",
                40, 130, 20
            );
            makeDisk(
                "right-eye",
                140, 130, 20
            );
            makePolyLine(
                "body",
                [70, 210, 70, 300, 170, 300, 170, 210]
            );
            makePolyLine(
                "left-leg",
                [70, 300, 70, 350]
            );
            makePolyLine(
                "right-leg",
                [170, 300, 170, 350]
            );
            makePolyLine(
                "left-arm",
                [70, 210, 20, 250]
            );
            makePolyLine(
                "right-arm",
                [170, 210, 220, 250]
            );

        </script>
    </head>
    <body>
        <div class="center" style="height: 100vh;">
            <div>
                <div class="center">

                    <svg viewBox="0 0 300 500">
                        <path id="head" />
                        <circle id="left-eye" />
                        <circle id="right-eye" />
                        <!--
                        <path id="left-eye" />
                        <path id="right-eye" />
                        -->
                        <path id="body" />
                        <path id="left-leg" />
                        <path id="right-leg" />
                        <path id="left-arm" />
                        <path id="right-arm" />
                    </svg>

                    <div id="div" class="normal" onclick="reverseImage(this)">
                        <img alt="Click me!" class="home-animation" src="/images/wiggly_dancing_guy.gif"/>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
